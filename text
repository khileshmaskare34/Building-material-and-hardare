<script>
    $(document).ready(function() {
      function fetchCategoriesAndSubcategories() {
        $.get('/shop/all_categories', function(categoriesData) {
          $('.categoriesDiv').html(categoriesData); // Update categoriesDiv with all categories and subcategories
        });
      }
  
      fetchCategoriesAndSubcategories(); // Fetch categories and subcategories initially
  
      $('a.category-link, a.subcategory-link').click(function(event) {
        event.preventDefault(); // Prevent default link behavior
  
        let categoryId = $(this).attr('href').split('/')[2]; // Extract category ID from URL
        let subcategoryId = $(this).attr('href').split('/')[3]; // Extract subcategory ID from URL
        
        let url = subcategoryId ? `/shop/${categoryId}/${subcategoryId}` : `/shop/${categoryId}`;
        
        $.get(url, function(data) {
          $('.productsDiv').html(data); // Update shop content with filtered results
          fetchCategoriesAndSubcategories(); // Fetch categories and subcategories again after clicking a link
        });
      });
    });
  </script>



// $(document).ready(function() {
    //     const api_url = "/shopp"; 
    
    //     async function getapi(url) {
            
    //       console.log("line1")
    //             const response = await fetch(url);
    //       console.log("line2")
    
    //             const data = await response.json();
    //       console.log("line3")
    
    //             console.log(data);
    //             show(data);
            
    //     }
    
        
    //     window.onclick = function() {
    //         getapi(api_url); 
    //     };
    // });


      <!-- Category links -->
               <!-- <li><a class="category-link" href="/shop/<%= category[i].id %>"><%= category[i].category_name %></a></li> -->