exports.category_by_filter = async (req, res)=>{
    connection.query(`select distinct category_id from shop`, (err, data)=>{
    if(data.length>0){
        res.json({
            message: 'success',
            data: data
        })
    }else{
        res.json({
            message: 'not get',
            data:[]
        })
    }
})
}


exports.subcategory_by_filter = (req, res)=>{
    connection.query(`select subcategory_id from shop`, (err, data1)=>{
        if(data1.length>0){
            res.json({
                message: 'success',
                data: data1
            })
        }else{
            res.json({
                message: 'not get',
                data:[]
            })
        }
    })
}


exports.allcat = async (req, res)=>{
     const {category, subcategory} = req.query
     console.log("ll", category)
     let sql = `SELECT *
     FROM shop
     INNER JOIN category ON shop.category_id = category.category_id
     INNER JOIN subcategory ON shop.subcategory_id = subcategory.subcategory_id;
     `
     if(category){
        console.log("success", category)
     }else{
        console.log("no");
     }
}

exports.shop_filter_by_category = async (req, res) => {
    const category_id = req.params.categoryId;
    console.log("luck", category_id)

    if (category_id) {
        connection.query('SELECT * FROM shop WHERE category_id = ?', [category_id], (err, data) => {
            if (err) {
                console.error("Error executing SQL query:", err);
                res.status(500).json({ error: "Internal Server Error" });
                return;
            }
            res.json({
                message: 'Data retrieved successfully',
                data: data
            });
        });
    } else {
        res.status(400).json({ error: "Category ID is missing" });
    }
}